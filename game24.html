<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avec ou sans bonbon ?</title>
    <style>
                body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background-color: #ffebcd;
            background-image: url('https://www.transparenttextures.com/patterns/snow.png');
            margin: 0;
            overflow-y: auto;  /* Added for scrolling if needed */
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #d32f2f;
            font-family: 'Comic Sans MS', cursive;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }


        
        /* User status */
        #userStatus {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2em;
            color: #a23636;
        }
               /* Instructions section */
        #instructions {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
            text-align: center;
            max-width: 1000px;
            font-size: 1.2em;
            color: #333;
            overflow-y: auto;  /* Added for scrolling if needed */
            max-height: 400px; /* Set a maximum height */

        }
               .decoration {
    position: relative; /* Change to relative */
    display: flex; /* Use flexbox for centering */
    justify-content: center; /* Horizontally center */
    align-items: center; /* Vertically center */
    height: 100vh; /* Full viewport height to center */
    padding: 20px 0;
}

#santa {
    height: 400px;
    width: auto;
}
       
       
    </style>
</head>
<body>
    <h1>🍬Avec ou sans bonbon ?🍬</h1>
    <div id="instructions">
        <p>Remis de leurs émotions après une nuit tumultueuse, les cinq compères s’affairaient à finaliser les derniers cadeaux de Noël. Dudley, perplexe, tendit un set d’assiettes Villeroy et Boch en demandant : « Et celui-là, c’est pour qui ? » Topapa leva la tête, un sourire en coin. « Oh, c’est pour Grinchémie. Laisse, je vais lui demander de l’emballer. » Dudley haussa un sourcil. « Tu vas lui spoiler son cadeau en lui demandant de l’emballer ? » Topapa réfléchit une seconde, avant d’acquiescer en riant : « T’as raison, c’est du réchauffé comme blague. Allez, je vais plutôt lui faire un site internet spécialement pour le lui spoiler. Ça, c’est du jamais vu. »</p>
<p>Non loin de là, un Bébé Romain un peu perdu leva un rouleau de papier toilette et demanda innocemment : « Et si on emballait avec ça, c’est bon ? » Topapa leva les yeux au ciel. « J’ai pas les mots ... »</p>
<p>Dudley, toujours en quête d’un moment d’attention, proposa alors : « Allez, une petite partie de Solo avant qu’on parte ? Après tout, faut que je sois rentré à temps pour recevoir mes 60 cadeaux. » Il sortit un paquet de cartes flambant neuf. « Solo bonbon ? » suggéra Bébé Romain avec un sourire malicieux. Mais Grinchémie, qui n’aimait pas perdre, sembla hésiter. Topapa, curieux, lança : « Grinchémie, quelles sont les probabilités que tu perdes cette fois-ci ? » Elle plissa les yeux, acceptant à contrecœur, convaincue que, comme d’habitude, Topapa allait perdre par malchance malgré ses stratégies trop élaborées pour leur groupe.</p>
<p>La partie battait son plein, et RaseToiLaMoustache semblait sur le point de remporter une victoire éclatante. Après un échange habile de son paquet de quinze cartes contre un simple changement de couleur, il sentait le triomphe à portée de sabot. Mais c’était sans compter sur Bébé Romain, qui, pressentant un bonbon goût vomi venir, révéla la carte finale du renne avec l’espoir d’un renversement de situation. Ce fut le chaos : paniqué, Dudley joua un changement de paquet, ce qui provoqua un échange général. RaseToiLaMoustache se retrouva soudain avec une pile de deux lignes de cartes et, avec elle, une défaite cuisante. Plus de 200 points perdus d’un coup le condamnaient à goûter l’effroyable bonbon.</p>
<p>Furieux, le renne refusa catégoriquement de s’y plier. « Non, non, il y a eu communication entre joueurs, et comme, cette fois, ça me désavantage, ça compte pas ! » déclara-t-il avec une mauvaise foi monumentale avant de quitter le groupe en trombe pour s’isoler dans la grange. Malgré les protestations, il resta intraitable.</p>
<p>Bébé Romain, tentant de désamorcer la tension, tapota doucement sur la table. « Allez, on laisse tomber. Il reste encore des cadeaux à emballer, et le temps presse. » L’équipe se remit au travail, laissant de côté cette querelle pour se concentrer sur leur mission.</p>
<p>Deux heures plus tard, tout était prêt. Les cadeaux soigneusement emballés, Topapa les chargea dans le traîneau. Quand il démarra le moteur, un bruit sourd fit sursauter les rennes, qui s’envolèrent immédiatement, convaincus d’avoir accompli l’impossible en soulevant quatre tonnes de paquets avec leurs pattes délicates. Toujours de mauvais poil à cause de sa défaite, RaseToiLaMoustache décida d’innover : « On fait le tour de la Terre à l’envers, cette fois ! » Topapa, exaspéré, le corrigea : « Non, pas par là. » Mais le renne rétorqua avec assurance : « Ça revient au même, c’est un cercle. »</p>
<p>Sauf que ça ne revenait pas tout à fait au même. En commençant par la Californie, il distribua les cadeaux aux États-Unis dans la matinée, surprenant les familles qui n’étaient pas habituées à une livraison aussi matinale. En Europe, personne ne remarqua la différence, puisque Topapa passa comme d’habitude pendant la nuit. Mais au Japon, les enfants, habitués à ouvrir leurs cadeaux le 24 au soir, furent pris de court. Le 25 au matin, certains pleuraient encore, déçus d’avoir été oubliés la veille.</p>
<p>Mais Topapa était heureux car il venait de vivre une belle aventure avec ses camarades, et il savait que tant qu’il serait avec eux, il continuerait année après année de passer de très beaux moments. </p>
<p>Pendant ce temps, dans le coin de la pièce Kevin et Priscilla se mariaient sous le regard du témoin Brandon. « Dommage que Maman ne soient plus là pour voir ça » se dit-il. Et il engloutit un moucheron pour se consoler. Allez joyeux Noël à vous. </p>
<p>Il retourna à l’atelier où ses camarades l’attendaient impatiemment autour de la console, manettes en main. « Allez, Topapa, t’es le joueur 1, t’es prêt ? » lança Bébé Romain en agitant la sienne.</p>
<p>« Une seconde, j’arrive ! » répondit Topapa tout en s’empressant de cacher discrètement un œuf de Pâques derrière une pile de jeux. Il ajusta son bonnet de Noël avec un sourire complice, savourant déjà l’effet de surprise que cette petite trouvaille provoquerait le 25.</p>
<p>Explication du jeu : Classique Solo. 100 points. Mais votre score est multiplié par deux. Pour la beauté du suspence.  

</p>
         </div>
     <img id="santa" class="decoration" src="https://i.imgur.com/0HhlBUu.png" alt="Santa Claus">
  
    <div id="highest-score">Meilleur score: 0</div>
     <div id="userStatus"></div>

   <script defer type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC4bjg7lVwd8FU8MREaPhBsBENv5qmiYYM",
            authDomain: "calendrier-de-l-avent-54e3a.firebaseapp.com",
            databaseURL: "https://calendrier-de-l-avent-54e3a-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "calendrier-de-l-avent-54e3a",
            storageBucket: "calendrier-de-l-avent-54e3a.appspot.com",
            messagingSenderId: "850639567855",
            appId: "1:850639567855:web:0d799a1ecca005fcff141a",
            measurementId: "G-PC1W7RYVEH"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        let userId = '';
        let highestScoreGame24 = 0

        const highestScoreDisplay = document.getElementById('highest-score');


        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                document.getElementById('userStatus').innerText = `Bienvenue : ${user.email}`;

                const userRef = doc(db, 'users', userId);
                const docSnap = await getDoc(userRef);

                if (!docSnap.exists()) {
                    await setDoc(userRef, { userId: userId, highestScoreGame24: 0, UserEmail: user.email });
                } else {
                    const userData = docSnap.data();
                    highestScoreGame24 = userData.highestScoreGame24 || 0;

                    UserEmail: user.email
                    
                    highestScoreDisplay.innerText = `Meilleur score: ${highestScoreGame24}`;
                    
                    
                }
            } else {
                window.location.href = 'login.html';
            }
        });

    </script>
</body>
</html>
