<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avec ou sans bonbon ?</title>
    <style>
                body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background-color: #ffebcd;
            background-image: url('https://www.transparenttextures.com/patterns/snow.png');
            margin: 0;
            overflow-y: auto;  /* Added for scrolling if needed */
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #d32f2f;
            font-family: 'Comic Sans MS', cursive;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }


        
        /* User status */
        #userStatus {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2em;
            color: #a23636;
        }
               /* Instructions section */
        #instructions {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
            text-align: center;
            max-width: 1000px;
            font-size: 1.2em;
            color: #333;
            overflow-y: auto;  /* Added for scrolling if needed */
            max-height: 400px; /* Set a maximum height */

        }
               .decoration {
    position: relative; /* Change to relative */
    display: flex; /* Use flexbox for centering */
    justify-content: center; /* Horizontally center */
    align-items: center; /* Vertically center */
    height: 100vh; /* Full viewport height to center */
    padding: 20px 0;
}

#santa {
    height: 400px;
    width: auto;
}
       
       
    </style>
</head>
<body>
    <h1>ğŸ¬Avec ou sans bonbon ?ğŸ¬</h1>
    <div id="instructions">
        <p>Remis de leurs Ã©motions aprÃ¨s une nuit tumultueuse, les cinq compÃ¨res sâ€™affairaient Ã  finaliser les derniers cadeaux de NoÃ«l. Dudley, perplexe, tendit un set dâ€™assiettes Villeroy et Boch en demandant : Â« Et celui-lÃ , câ€™est pour qui ? Â» Topapa leva la tÃªte, un sourire en coin. Â« Oh, câ€™est pour GrinchÃ©mie. Laisse, je vais lui demander de lâ€™emballer. Â» Dudley haussa un sourcil. Â« Tu vas lui spoiler son cadeau en lui demandant de lâ€™emballer ? Â» Topapa rÃ©flÃ©chit une seconde, avant dâ€™acquiescer en riant : Â« Tâ€™as raison, câ€™est du rÃ©chauffÃ© comme blague. Allez, je vais plutÃ´t lui faire un site internet spÃ©cialement pour le lui spoiler. Ã‡a, câ€™est du jamais vu. Â»</p>
<p>Non loin de lÃ , un BÃ©bÃ© Romain un peu perdu leva un rouleau de papier toilette et demanda innocemment : Â« Et si on emballait avec Ã§a, câ€™est bon ? Â» Topapa leva les yeux au ciel. Â« Jâ€™ai pas les mots ... Â»</p>
<p>Dudley, toujours en quÃªte dâ€™un moment dâ€™attention, proposa alors : Â« Allez, une petite partie de Solo avant quâ€™on parte ? AprÃ¨s tout, faut que je sois rentrÃ© Ã  temps pour recevoir mes 60 cadeaux. Â» Il sortit un paquet de cartes flambant neuf. Â« Solo bonbon ? Â» suggÃ©ra BÃ©bÃ© Romain avec un sourire malicieux. Mais GrinchÃ©mie, qui nâ€™aimait pas perdre, sembla hÃ©siter. Topapa, curieux, lanÃ§a : Â« GrinchÃ©mie, quelles sont les probabilitÃ©s que tu perdes cette fois-ci ? Â» Elle plissa les yeux, acceptant Ã  contrecÅ“ur, convaincue que, comme dâ€™habitude, Topapa allait perdre par malchance malgrÃ© ses stratÃ©gies trop Ã©laborÃ©es pour leur groupe.</p>
<p>La partie battait son plein, et RaseToiLaMoustache semblait sur le point de remporter une victoire Ã©clatante. AprÃ¨s un Ã©change habile de son paquet de quinze cartes contre un simple changement de couleur, il sentait le triomphe Ã  portÃ©e de sabot. Mais câ€™Ã©tait sans compter sur BÃ©bÃ© Romain, qui, pressentant un bonbon goÃ»t vomi venir, rÃ©vÃ©la la carte finale du renne avec lâ€™espoir dâ€™un renversement de situation. Ce fut le chaos : paniquÃ©, Dudley joua un changement de paquet, ce qui provoqua un Ã©change gÃ©nÃ©ral. RaseToiLaMoustache se retrouva soudain avec une pile de deux lignes de cartes et, avec elle, une dÃ©faite cuisante. Plus de 200 points perdus dâ€™un coup le condamnaient Ã  goÃ»ter lâ€™effroyable bonbon.</p>
<p>Furieux, le renne refusa catÃ©goriquement de sâ€™y plier. Â« Non, non, il y a eu communication entre joueurs, et comme, cette fois, Ã§a me dÃ©savantage, Ã§a compte pas ! Â» dÃ©clara-t-il avec une mauvaise foi monumentale avant de quitter le groupe en trombe pour sâ€™isoler dans la grange. MalgrÃ© les protestations, il resta intraitable.</p>
<p>BÃ©bÃ© Romain, tentant de dÃ©samorcer la tension, tapota doucement sur la table. Â« Allez, on laisse tomber. Il reste encore des cadeaux Ã  emballer, et le temps presse. Â» Lâ€™Ã©quipe se remit au travail, laissant de cÃ´tÃ© cette querelle pour se concentrer sur leur mission.</p>
<p>Deux heures plus tard, tout Ã©tait prÃªt. Les cadeaux soigneusement emballÃ©s, Topapa les chargea dans le traÃ®neau. Quand il dÃ©marra le moteur, un bruit sourd fit sursauter les rennes, qui sâ€™envolÃ¨rent immÃ©diatement, convaincus dâ€™avoir accompli lâ€™impossible en soulevant quatre tonnes de paquets avec leurs pattes dÃ©licates. Toujours de mauvais poil Ã  cause de sa dÃ©faite, RaseToiLaMoustache dÃ©cida dâ€™innover : Â« On fait le tour de la Terre Ã  lâ€™envers, cette fois ! Â» Topapa, exaspÃ©rÃ©, le corrigea : Â« Non, pas par lÃ . Â» Mais le renne rÃ©torqua avec assurance : Â« Ã‡a revient au mÃªme, câ€™est un cercle. Â»</p>
<p>Sauf que Ã§a ne revenait pas tout Ã  fait au mÃªme. En commenÃ§ant par la Californie, il distribua les cadeaux aux Ã‰tats-Unis dans la matinÃ©e, surprenant les familles qui nâ€™Ã©taient pas habituÃ©es Ã  une livraison aussi matinale. En Europe, personne ne remarqua la diffÃ©rence, puisque Topapa passa comme dâ€™habitude pendant la nuit. Mais au Japon, les enfants, habituÃ©s Ã  ouvrir leurs cadeaux le 24 au soir, furent pris de court. Le 25 au matin, certains pleuraient encore, dÃ©Ã§us dâ€™avoir Ã©tÃ© oubliÃ©s la veille.</p>
<p>Mais Topapa Ã©tait heureux car il venait de vivre une belle aventure avec ses camarades, et il savait que tant quâ€™il serait avec eux, il continuerait annÃ©e aprÃ¨s annÃ©e de passer de trÃ¨s beaux moments. </p>
<p>Pendant ce temps, dans le coin de la piÃ¨ce Kevin et Priscilla se mariaient sous le regard du tÃ©moin Brandon. Â« Dommage que Maman ne soient plus lÃ  pour voir Ã§a Â» se dit-il. Et il engloutit un moucheron pour se consoler. Allez joyeux NoÃ«l Ã  vous. </p>
<p>Il retourna Ã  lâ€™atelier oÃ¹ ses camarades lâ€™attendaient impatiemment autour de la console, manettes en main. Â« Allez, Topapa, tâ€™es le joueur 1, tâ€™es prÃªt ? Â» lanÃ§a BÃ©bÃ© Romain en agitant la sienne.</p>
<p>Â« Une seconde, jâ€™arrive ! Â» rÃ©pondit Topapa tout en sâ€™empressant de cacher discrÃ¨tement un Å“uf de PÃ¢ques derriÃ¨re une pile de jeux. Il ajusta son bonnet de NoÃ«l avec un sourire complice, savourant dÃ©jÃ  lâ€™effet de surprise que cette petite trouvaille provoquerait le 25.</p>
<p>Explication du jeu : Classique Solo. 100 points. Mais votre score est multipliÃ© par deux. Pour la beautÃ© du suspence.  

</p>
         </div>
     <img id="santa" class="decoration" src="https://i.imgur.com/0HhlBUu.png" alt="Santa Claus">
  
    <div id="highest-score">Meilleur score: 0</div>
     <div id="userStatus"></div>

   <script defer type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC4bjg7lVwd8FU8MREaPhBsBENv5qmiYYM",
            authDomain: "calendrier-de-l-avent-54e3a.firebaseapp.com",
            databaseURL: "https://calendrier-de-l-avent-54e3a-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "calendrier-de-l-avent-54e3a",
            storageBucket: "calendrier-de-l-avent-54e3a.appspot.com",
            messagingSenderId: "850639567855",
            appId: "1:850639567855:web:0d799a1ecca005fcff141a",
            measurementId: "G-PC1W7RYVEH"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        let userId = '';
        let highestScoreGame24 = 0

        const highestScoreDisplay = document.getElementById('highest-score');


        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                document.getElementById('userStatus').innerText = `Bienvenue : ${user.email}`;

                const userRef = doc(db, 'users', userId);
                const docSnap = await getDoc(userRef);

                if (!docSnap.exists()) {
                    await setDoc(userRef, { userId: userId, highestScoreGame24: 0, UserEmail: user.email });
                } else {
                    const userData = docSnap.data();
                    highestScoreGame24 = userData.highestScoreGame24 || 0;

                    UserEmail: user.email
                    
                    highestScoreDisplay.innerText = `Meilleur score: ${highestScoreGame24}`;
                    
                    
                }
            } else {
                window.location.href = 'login.html';
            }
        });

    </script>
</body>
</html>
